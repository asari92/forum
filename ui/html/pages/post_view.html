{{define "title"}}Post #{{.Post.ID}}{{end}}

{{define "main"}}
<div class='snippet'>
    {{with .Post}}
    <div class='metadata'>
        <strong>{{.Title}}</strong>
        <span>#{{.ID}}</span>
    </div>
    <pre><code>{{.Content}}</code></pre>
    {{end}}
    <div class='metadata'>
        <form method="POST" action="/">
            <input type="hidden" name="token" value="{{.CSRFToken}}">
            <strong>Categories: </strong>
            <!-- Динамическое отображение категорий -->
            {{range .Categories}}
            <div>
                <button type="submit" name="categories" value="{{.ID}}" class="category-link">{{.Name}}</button>
            </div>
            {{end}}
        </form>
    </div>
    {{with .Post}}
    <div class='metadata'>
        <time>UserID: {{.UserID}}</time>
        <time>Created: {{humanDate .Created}}</time>
    </div>
    {{end}}
    <div class='metadata'>
        <form method="POST" action="/post/view/{{.Post.ID}}">
            <input type="hidden" name="token" value="{{.CSRFToken}}">
            <input type="hidden" name="post_id" value="{{.Post.ID}}">
            <!-- Отображение иконок для лайка и дизлайка -->
            <button type="submit" name="is_like" value="true" class="like-button">
                <span class="icon {{if and .ReactionData.UserReaction .ReactionData.UserReaction.IsLike}}icon-like-active{{else}}icon-like{{end}}">{{.ReactionData.Likes}}👍</span>
            </button>
            <button type="submit" name="is_like" value="false" class="dislike-button">
                <span class="icon {{if and .ReactionData.UserReaction (not .ReactionData.UserReaction.IsLike)}}icon-dislike-active{{else}}icon-dislike{{end}}">{{.ReactionData.Dislikes}}👎</span>
            </button>
        </form>
    </div>    
</div>
{{end}}