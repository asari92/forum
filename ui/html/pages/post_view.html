{{define "title"}}Post #{{.Post.ID}}{{end}}

{{define "main"}}
<div class='snippet'>
    {{with .Post}}
    <div class='metadata'>
        <strong>{{.Title}}</strong>
        <span>#{{.ID}}</span>
    </div>
    <pre><code>{{.Content}}</code></pre>
    {{end}}
    <div class='metadata'>
        <form method="POST" action="/">
            <input type="hidden" name="token" value="{{.CSRFToken}}">
            <strong>Categories: </strong>
            <!-- Динамическое отображение категорий -->
            {{range .Categories}}
            <div>
                <button type="submit" name="categories" value="{{.ID}}" class="category-link">{{.Name}}</button>
            </div>
            {{end}}
        </form>
    </div>
    {{with .Post}}
    <div class='metadata'>
        <time>UserID: {{.UserID}}</time>
        <time>Created: {{humanDate .Created}}</time>
    </div>
    {{end}}
    <div>
        <form method="POST" action="/post/reaction">
            <input type="hidden" name="token" value="{{.CSRFToken}}">
            <input type="hidden" name="post_id" value="{{.Post.ID}}">
            {{with .ReactionData.UserReaction}}
            <button type="submit" name="is_like" value="true" class="{{if .IsLike}}active{{end}}">Лайк</button>
            <button type="submit" name="is_like" value="false" class="{{if not .IsLike}}active{{end}}">Дизлайк</button>
            {{end}}
            <span>Likes: {{.ReactionData.Likes}} Dislikes: {{.ReactionData.Dislikes}}</span>
        </form>
    </div>
</div>
{{end}}